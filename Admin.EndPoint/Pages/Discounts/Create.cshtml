@page
@using Domain.Discounts
@model Admin.EndPoint.Pages.Discounts.CreateModel
@{
}

<link href="~/MdPersianDateTimePicker/jquery.md.bootstrap.datetimepicker.style.css" rel="stylesheet"/>
<link href="~/lib/select2/css/select2.css" rel="stylesheet" />
<link href="https://raw.githack.com/ttskch/select2-bootstrap4-theme/master/dist/select2-bootstrap4.css" rel="stylesheet">


<div class="page-body">
    <div class="title-header">
        <h5>Add New Catalog Item</h5>
    </div>

    <!-- New Product Add Start -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="row">
                    <div class="col-sm-12">
                        <form class="theme-form theme-form-2 mega-form" asp-antiforgery="true" id ="createForm" onsubmit="return sendDataToServer(event)">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="card-header-2">
                                        <h5>Catalog Item Information</h5>
                                    </div>
                                    <div class="row">
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-sm-2 mb-0">Name</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" placeholder="Name" id="Name" asp-for="model.Name">
                                                <span asp-validation-for="model.Name" class="text-danger"></span>
                                            </div>
                                        </div>


                                        <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">RequiresCouponCode</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" placeholder="RequiresCouponCode" id="RequiresCouponCode" asp-for="model.RequiresCouponCode">
                                                <span asp-validation-for="model.RequiresCouponCode" class="text-danger"></span>
                                            </div>
                                        </div>

                                        <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">CouponCode</label>
                                            <div class="col-sm-10">
                                                  <input class="form-control" type="text" placeholder="CouponCode" id="CouponCode" asp-for="model.CouponCode">
                                                <span asp-validation-for="model.CouponCode" class="text-danger"></span>
                                            </div>
                                        </div>

                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-sm-2 mb-0">StartDate</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" placeholder="StartDate" asp-for="model.StartDate">
                                                <span asp-validation-for="model.StartDate" class="text-danger"></span>
                                            </div>
                                        </div>

                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-sm-2 mb-0">EndDate</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="tel" placeholder="EndDate" asp-for="model.EndDate">
                                                <span asp-validation-for="model.EndDate" class="text-danger"></span>
                                            </div>
                                        </div>


                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-sm-2 mb-0">UsePercentage</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" placeholder="UsePercentage" id="UsePercentage" asp-for="model.UsePercentage">
                                                <span asp-validation-for="model.UsePercentage" class="text-danger"></span>
                                            </div>
                                        </div>

                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-sm-2 mb-0">DiscountPercentage</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" placeholder="DiscountPercentage" id="DiscountPercentage" asp-for="model.DiscountPercentage">
                                                <span asp-validation-for="model.DiscountPercentage" class="text-danger"></span>
                                            </div>
                                        </div>

                                        <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">DiscountAmount</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" placeholder="DiscountAmount" id="DiscountAmount" asp-for="model.DiscountAmount">
                                                <span asp-validation-for="model.DiscountAmount" class="text-danger"></span>
                                            </div>
                                        </div>

                                          <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">Brand</label>
                                            <div class="col-sm-10">
                                                <select class="js-example-basic-single w-100" asp-for="model.DiscountTypeId" name="DiscountTypeId" asp-items="@Html.GetEnumSelectList<DiscountType>()" id="DiscountTypeId">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">DiscountLimitationId</label>
                                            <div class="col-sm-10">
                                                <select class="js-example-basic-single w-100" asp-for="model.DiscountLimitationId" name="DiscountLimitationId" asp-items="@Html.GetEnumSelectList<DiscountLimitationType>()" id="DiscountLimitationId">
                                                </select>
                                            </div>
                                        </div>


                                         <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">LimitationTimes</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" placeholder="LimitationTimes" id="LimitationTimes" asp-for="model.LimitationTimes">
                                                <span asp-validation-for="model.LimitationTimes" class="text-danger"></span>
                                            </div>
                                        </div>

                                          <div class="mb-4 row align-items-center">
                                            <label class="col-sm-2 col-form-label form-label-title">DiscountLimitationId</label>
                                            <div class="col-sm-10">
                                                <select class="js-example-basic-single w-100" asp-for="model.appliedToCatalogItem" >
                                                </select>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-sm-10">
                                                    <button class="btn btn-primary me-3">Submit</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- New Product Add End -->
    <!-- footer Start -->
    <div class="container-fluid">
        <footer class="footer">
            <div class="row">
                <div class="col-md-12 footer-copyright text-center">
                    <p class="mb-0">Copyright 2022 © Reza22050</p>
                </div>
            </div>
        </footer>
    </div>
    <!-- footer En -->
</div>

@section Scripts
{
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/MdPersianDateTimePicker/jquery.md.bootstrap.datetimepicker.js"></script>
    <script>
        $('#model_StartDate').MdPersianDateTimePicker({
            targetTextSelector: '#model_StartDate',
            toDate: true,
            groupId: 'rangeSelector1',
            placement: 'top',
            enableTimePicker: true,
            dateFormat: 'yyyy-MM-dd HH:mm:ss',
            textFormat: 'yyyy-MM-dd HH:mm:ss',
            modalMode: true
        });

        $('#model_EndDate').MdPersianDateTimePicker({
            targetTextSelector: '#model_EndDate',
            toDate: true,
            groupId: 'rangeSelector1',
            placement: 'top',
            enableTimePicker: true,
            dateFormat: 'yyyy-MM-dd HH:mm:ss',
            textFormat: 'yyyy-MM-dd HH:mm:ss',
            modalMode: true
        });
    </script>

    <script src="~/lib/select2/js/select2.js"></script>
    <script>
        $("#model_appliedToCatalogItem").select2({
            placeholder:"Find porudct and select it...",
            allowClear:true,
            multiple:true,
            tags:true,
            tokenSeprators: [',', ' '],
            theme: "bootstrap4",
             ajax: {
            url: "/api/DiscountApi/SearchCatalogItem",
            contentType: "application/json; charset=utf-8",
            data: function (params) {
                var query =
                {
                    term: params.term,
                };
                return query;
            },
            processResults: function (result) {
                return {
                    results: $.map(result, function (item) {
                        return {
                            id: item.id,
                            text: item.name
                        };
                    }),
                };
            }
        }
        });
    </script>

}